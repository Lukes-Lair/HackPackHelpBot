<!DOCTYPE html> 
<html> 
<head> 
    <title>Troubleshooting Flowchart</title> 
    <script src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script> 
    <style> 
        body { 
            background-image: url('data:image/svg+xml,<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg"><circle cx="2" cy="2" r="2" fill="%23FFFFFF" opacity="0.15" /></svg>'); 
            background-color: black; 
            background-size: 2em; 
            background-repeat: repeat; 
            margin: 0; 
            padding: 0; 
            width: 100vw; 
            height: 100vh; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            overflow: hidden; 
        } 
 
        .mermaid-container { 
            width: 100%; 
            height: 100%; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            padding: 20px; 
            box-sizing: border-box; 
        }

        .mermaid { 
            width: 100%; 
            height: 100%; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
        }

        .mermaid svg { 
            max-width: 100%; 
            max-height: 100%; 
        }
    </style> 
</head> 
<body> 
    <div class="mermaid-container">
        <div class="mermaid"> 
flowchart TD
    Title["My Label Maker isn't working"]
    Title --> Screen[My screen isn't working]
    Title --> Motor[A tape motor isn't working]
    Title --> Servo[My servo isn't working]
    Title --> Joystick[My joystick isn't working]
    Title --> Power[It won't turn on]

    %% LCD Issues
    Screen --> ScreenPushIn[Push the arduino firmly into the breadboard, it might click into place. Does it work now?]
    ScreenPushIn --> CheckBacklight[Is the backlight on?]
    CheckBacklight --> |No| ReplaceLCD[Contact CrunchLabs for a replacement screen]
    CheckBacklight --> |Yes| LCDAnotherArduino[Try uploading Label Maker code to a different Arduino from ide.crunchlabs.com, and use this arduino. Does it work now?]
    LCDAnotherArduino --> |No| ReplaceLCD
    LCDAnotherArduino --> |Yes| ReplacementArduino[Contact CrunchLabs for a replacement Arduino]

    %% Motor Issues
    Motor --> BackwardsCheck[Is the motor going backwards?]
    BackwardsCheck  --> |Yes| BackwardsFix[Take the 4 signal wires for the backwards motor, and flip them around in the breadboard]
    BackwardsCheck --> |No| MotorAnotherArduino[Try uploading Label Maker code to a different Arduino from ide.crunchlabs.com, and use this arduino. Does it work now?]
    MotorAnotherArduino --> |No| SwapMotorsCheck[If a motor isn't working, swap which motor is plugged into which driver, you will need to unscrew a driver from the wall to reach. Does the broken axis swap to being the other motor?]
    SwapMotorsCheck --> |Yes| ReplacementDriver[Contact CrunchLabs for a replacement driver]
    SwapMotorsCheck --> |No| ReplacementMotor[Contact CrunchLabs for a replacement Stepper Motor]

    %% Servo issues
    Servo --> CheckMoving["Is the servo moving or making sound?"]
    CheckMoving --> |Yes| ReplacementServo[Contact CrunchLabs for a replacement servo]
    CheckMoving --> |No| ServoHelp[Contact CrunchLabs for additional help]

    %% Joystick Issues
    Joystick --> JoystickPushIn[Push the arduino firmly into the breadboard, it might click into place. Does it work now?]
    JoystickPushIn --> |No| ReplacementJoystick[Contact CrunchLabs for a replacement joystick]

    %% Power Issues
    Power --> PowerPushIn[Push the arduino firmly into the breadboard, it might click into place. Did it turn on?]
    PowerPushIn --> |No| CheckBackwardsWires[Make sure you don't have red and black wires backwards. Does it turn on now?]
    CheckBackwardsWires --> |No| TryAnotherBattery[Try a charged battery from another Hack Pack. Does it turn on now?]
    TryAnotherBattery --> |Yes| ReplacementBattery[Charge your battery, if it still doesn't work contact CrunchLabs for a replacement battery]
    TryAnotherBattery --> |No| Help[Contact CrunchLabs for additional help]

    %% Node-specific styling
    style Title white-space:nowrap
    style Title stroke-width:3px;

    %% templateColor #644e9b
        </div> 
    </div>
 
    <script> 
        mermaid.initialize({ 
            startOnLoad: true, 
            theme: "dark", 
            themeVariables: { 
                nodeBorder: "#644e9b", 
                edgeLabelBackground: "#0005" 
            }, 
            flowchart: { 
                diagramPadding: 10, 
                htmlLabels: true 
            } 
        }); 

        // Add event listener to adjust SVG after rendering
        document.addEventListener('DOMContentLoaded', () => {
            const mermaidEl = document.querySelector('.mermaid');
            const svg = mermaidEl.querySelector('svg');
            
            if (svg) {
                // Get the actual bounds of the SVG content
                const bbox = svg.getBBox();
                
                // Calculate aspect ratio
                const aspectRatio = bbox.width / bbox.height;
                
                // Set viewBox to match the content's actual dimensions
                svg.setAttribute('viewBox', `0 0 ${bbox.width} ${bbox.height}`);
                
                // Adjust container size based on aspect ratio
                const container = document.querySelector('.mermaid-container');
                const containerWidth = container.clientWidth;
                const containerHeight = container.clientHeight;
                const containerAspectRatio = containerWidth / containerHeight;

                if (aspectRatio > containerAspectRatio) {
                    // Width is the constraining dimension
                    svg.style.width = '100%';
                    svg.style.height = 'auto';
                } else {
                    // Height is the constraining dimension
                    svg.style.width = 'auto';
                    svg.style.height = '100%';
                }

                // Ensure the SVG is centered
                svg.style.margin = 'auto';
                svg.style.display = 'block';
            }
        });
    </script> 
</body> 
</html>